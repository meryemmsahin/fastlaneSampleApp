default_platform(:ios)

platform :ios do
desc "Test Ortamı için Firebase App Distribution'a Yükleme"
lane :qa do
    increment_build_number

    app_store_connect_api_key(
      key_id: ENV["APP_STORE_CONNECT_KEY_ID"],
      issuer_id: ENV["APP_STORE_CONNECT_ISSUER_ID"],
      key_content: File.read("./AuthKey_TT9YC58NX8.p8"),
      is_key_content_base64: false,
      in_house: false
    )

    build_app(
      scheme: "fastlanesample",
      export_method: "development",
      export_options: {
        provisioningProfiles: {
          "tr.com.meryem.fastlanesample" => "fastlaneProvisioningProfile"
        }
      }
    )
end

  desc "Beta Testi için TestFlight Dağıtımı"
  lane :beta do
    increment_build_number(
      xcodeproj: "fastlanesample.xcodeproj"
    )
    build_app(
      scheme: "fastlanesample"
    )
    upload_to_testflight
  end

  desc "Production için App Store Yayınlama"
  lane :release do
    increment_build_number(
      xcodeproj: "fastlanesample.xcodeproj"
    )
    build_app(
      scheme: "fastlanesample"
    )
    upload_to_app_store
  end
end